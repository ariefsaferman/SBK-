	ORG	00H

; ################  SET P0 AS INPUT COLUMN AND P2 AS INPUT ROW  ########### ; 
	MOV	P0, #0FFH
	MOV	P1, #0FFH
	MOV	R0, #4
	MOV	R1, #0

; #####################  RESET AND DETECT DIGIT NTH  ################## ; 
AGAIN:
	MOV	P1, #0XFF
BALIK:	CJNE	R0, #1, CMP2
	SETB	P2.1
	CLR	P2.0
	SJMP	PRESS_KEY
CMP2:	CJNE	R0, #2, CMP3
	SETB	P2.2
	CLR	P2.1
	SJMP	PRESS_KEY
CMP3:	CJNE	R0, #3, CMP4
	SETB	P2.3
	CLR	P2.2
	SJMP	PRESS_KEY
CMP4:	CJNE	R0, #4, BALIK
	CLR	P2.3
	SJMP	PRESS_KEY
HERE:
	MOV	P3, #0XFF
	DJNZ	R0, AGAIN
INFINITE_LOOP:	SJMP	INFINITE_LOOP


; ############## DETECT WHICH NUMBER IS BEING INPUT  ################ ; 
PRESS_KEY:
;BARIS 1 
	CLR	p3.0
	JNB	P0.0, NUM_1
	JNB	P0.1, NUM_2
	JNB	P0.2, NUM_3
	SETB	P3.0



;BARIS 2 
	CLR	P3.1
	JNB	P0.0, NUM_4
	JNB	P0.1, NUM_5
	JNB	P0.2, NUM_6
	SETB	P3.1

;BARIS 3 
	CLR	P3.2
	JNB	P0.0, NUM_7
	JNB	P0.1, NUM_8
	JNB	P0.2, NUM_9
	SETB	P3.2

;BARIS 4 
	CLR	P3.3
	JNB	P0.1, NUM_0
	SETB	P3.3
	SJMP	PRESS_KEY

; ##############   DISPLAY NUMBER IN 7-SEGMENT     ############################# ; 
NUM_1:
	CLR	A
	MOV	DPTR, #301H
	MOVC	A, @A+DPTR
	MOV	P1, A
	SJMP	HERE

NUM_2:
	CLR	A
	MOV	DPTR, #302H
	MOVC	A, @A+DPTR
	MOV	P1, A
	SJMP	HERE

NUM_3:
	CLR	A
	MOV	DPTR, #303H
	MOVC	A, @A+DPTR
	MOV	P2, A
	SJMP	HERE

NUM_4:
	CLR	A
	MOV	DPTR, #304H
	MOVC	A, @A+DPTR
	MOV	P1, A
	SJMP	HERE

NUM_5:
	CLR	A
	MOV	DPTR, #305H
	MOVC	A, @A+DPTR
	MOV	P1, A
	SJMP	HERE

NUM_6:
	CLR	A
	MOV	DPTR, #306H
	MOVC	A, @A+DPTR
	MOV	P1, A
	LCALL	HERE

NUM_7:
	CLR	A
	MOV	DPTR, #307H
	MOVC	A, @A+DPTR
	MOV	P1, A
	LCALL	HERE

NUM_8:
	CLR	A
	MOV	DPTR, #308H
	MOVC	A, @A+DPTR
	MOV	P1, A
	LCALL	HERE

NUM_9:
	CLR	A
	MOV	DPTR, #309H
	MOVC	A, @A+DPTR
	MOV	P1, A
	LCALL	HERE

NUM_0:
	CLR	A
	MOV	DPTR, #300H
	MOVC	A, @A+DPTR
	MOV	P1, A
	LCALL	HERE

	ORG	300H
TABLE:	DB	01000000b	;NUMBER 0
	DB	11111001b	; NUMBER 1
	DB	10100100b	; NUMBER 2 
	DB	10110000b	; NUMBER 3
	DB	10011001b	; NUMBER 4 
	DB	10010010b	; NUMBER 5 
	DB	10000010b	; NUMBER 6 
	DB	11111000b	; NUMBER 7
	DB	10000000b	; NUMBER 8 
	DB	10010000b	; NUMBER 9 
	END








